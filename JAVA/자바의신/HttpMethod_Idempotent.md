## HTTP Method와 멱등성

---

### HTTP Method와 멱등성이 뭔데?

* 클라이언트가 서버에게 어떤 종류의 동작을 수행하길 원하는지 알려주는 방법

| 종류     | 멱등성 | 설명                                                                        |
|--------|----|---------------------------------------------------------------------------|
| GET    | ✅️ | 데이터를 몇번 조회하든 같은 결과 조회가 되기때문에 멱등성 조건에 부합하다                                 | 
| POST   | ❌️ | 항상 새로운 데이터를 만들어내기 때문에 멱등하지 않는다                                            |
| PUT    | ✅️ | 이미 데이터가 있다면 덮어씌우고 없다면 생성하는 하는데에 사용하는 Method이기 때문에 몇번을 조회하든 멱등하다           |
| PATCH  | ❌️ | 일부 데이터를 바꿀 때 사용하는 Method로 결과 값이 달라지기 때문에 멱등하지 않는다                         |
| DELETE | ✅️ | 삭제를 목적으로 사용하는 Method 이기 때문에 항상 같은 결과를 가지므로 멱등하다.                          | 
| HEAD   | ✅️ | GET과 같지만 Body를 뺀 Header 정보만 받기때문에 서버의 상태를 변경하지 않기때문에 멱등하다                 |
| OPTION | ✅️ | 서버가 어떤 Http Method와 Header를 지원하는지 조회할 때 사용하는 Method라 서버 상태를 변경하지 않기에 멱등하다 |

### 항상 예외는 존재 간단 예시
* `GET` 의 경우에도 게시글의 조회수가 업데이트 되게되면 결과값이 달라지기 때문에 멱등하지 않게 된다.
  * 조회수 업데이트에 경우 `PTATH`를 따로 분리해서 사용하게 되면 멱등해진다.
* `PTATH`도 `PUT`처럼 사용할 경우 멱등해질 수 있다.

### 멱등성이 왜 중요한거야..
* 재시도가 안전하다
    ```text
    ❌ POST /orders (멱등 아님)
       - 타임아웃 발생 -> 재시도하면 주문이 2번 생성될 수 있음
       - 개발자가 조심해야 함
    
    ✅ PUT /orders/12345 (멱등)
      - 타임아웃 발생 -> 안심하고 재시도 가능
      - 몇 번을 보내도 결과는 같음
   ```
결국 여러번 호출해도 안전한가? 에 대한 보장인 것 같다.
